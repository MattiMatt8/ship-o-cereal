{% extends 'base.html' %} {% load static %} {% block content %}

  <main class="container mx-auto my-16 text-customGray">
    {% include 'components/back_button.html' %}
    <!-- START Image and meta data -->
    <div class="flex flex-row">
      <!-- IMAGE -->
      <div class="">
        <img
            class="object-cover object-center w-96 h-full rounded-t-md"
            src="{% static 'images/' %}{{ product.category.name }}/{{ product.image_set.first.name }}"
        />
      </div>
      <!-- META DATA -->
      <div class="ml-16 flex flex-col justify-between w-96">
        <!-- START Title and weight -->
        <div>
          <div class="flex flex-row items-end">
            <h1 class="font-medium text-5xl">{{ product.name }}</h1>
            {% if product.weight != None %}
              <span class="ml-4 font-light text-sm">{{ product.weight }}gr</span>
            {% endif %}
          </div>
          <!-- END Title and weight -->
          <!-- START Product rating -->
          <div class="flex flex-row my-2">
            <!-- START Stars -->
            <div class="flex flex-row">
              {% for item in "x"|ljust:"5" %}
                {% include 'components/icons/star_filled.html' %}
              {% endfor %}
            </div>
            <!-- END Stars -->
            <span class="ml-4 font-light text-sm"
            >{{ product.total_reviews }} reviews</span
            >
          </div>
          <!-- END Product rating -->
          <div class="text-sm font-medium">
            <span>In stock</span>
            <span></span>
          </div>
          <div class="flex flex-row mb-16">
            {% for label in product.labels.all %}
              {% if label.id == 1 %}
                <!-- START Gluten free icons -->
                <span class="mr-2">
                  {% include 'components/icons/gluten-free-icon.html' with classAttr="w-12 h-12" %}
                </span>
              {% elif label.id == 2 %}
                <span class="mr-2">
                  {% include 'components/icons/healthy-icon.html' with classAttr="w-12 h-12" %}
                </span>
              {% elif label.id == 3 %}
                <span class="mr-2">
                  {% include 'components/icons/sugary-icon.html' with classAttr="w-12 h-12" %}
                </span>
              {% endif %}
            {% endfor %}
          </div>

        </div>
        <div class="">
          <h3 class="text-xl font-medium">Product description</h3>
          <p>{{ product.description }}</p>
        </div>
        <div>

          <!-- START Add to cart button -->
          <div class="">
            <h3 class="text-3xl mb-4">${{ product.price }}</h3>
            <div class="flex">
              <button id="buy-btn" data-product-id="{{ product.id }}"
                      class="{% if quantity is not None %} hidden {% endif %} rounded p-2 bg-customGreen text-white w-32">
                Add to cart
              </button>
              <div id="amount-btns" class="{% if quantity is None %} hidden {% endif %} text-customGray">
                <div class="custom-number-input w-32">
                  <div class="flex flex-row h-10 w-full rounded-lg relative bg-transparent">
                    <button
                        class="bg-gray-100 text-gray-600 h-full w-20 rounded-l outline-none hover:text-gray-700 hover:bg-gray-200"
                        data-action="decrement"
                        type="button">
                      <span class="m-auto text-2xl font-thin">âˆ’</span>
                    </button>
                    <input
                        id="amount-input"
                        type="text"
                        data-product-id="{{ product.id }}"
                        class="outline-none focus:outline-none text-center w-full bg-gray-100 font-semibold text-md flex items-center outline-none"
                        name="custom-input-number"
                        value="{% if quantity is None %}1{% else %}{{ quantity }}{% endif %}"/>
                    <button data-action="increment"
                            class="bg-gray-100 text-gray-600 hover:text-gray-700 hover:bg-gray-200 h-full w-20 rounded-r cursor-pointer">
                      <span class="m-auto text-2xl font-thin">+</span>
                    </button>
                  </div>
                </div>
              </div>


            </div>
          </div>
          <!-- END Add to cart button -->
        </div>
      </div>
    </div>
    <span class="font-light text-sm">Product number: {{ product.id }}</span>

    <!-- END Image and meta data -->
    <div class="flex flex-row w-96 mt-4 wrap">
      {% for image in product.image_set.all %}
        <img
            class="object-cover object-center w-24 h-24 mr-4"
            src="{% static 'images/' %}{{ product.category.name }}/{{ image }}"
        />
      {% endfor %}


    </div>

    <!-- START Nutrition stuff -->
    <div class="mt-10 w-72">
      <h1 class="text-2xl font-medium">Ingredients</h1>
      <p>{{ product.contents }}</p>
    </div>
    <!-- END Nutrition stuff -->

    <!-- START Reviews -->
    <div class="flex flex-col mt-10 w-1/3">
      <h1 class="text-2xl font-medium">Reviews</h1>
      <!-- START Single review -->
      {% include 'components/product_review.html' %}
      {% include 'components/product_review.html' %}
      {% include 'components/product_review.html' %}
      {% include 'components/product_review.html' %}
      {% include 'components/product_review.html' %}
      <!-- END Single review -->

    </div>
    <!-- END Reviews -->

  </main>
{% endblock %}

{% block page_scripts %}
  <script src="{% static 'js/product_details.js' %}"></script>
{% endblock %}

{% block page_styles %}
  <style>
      input[type='number']::-webkit-inner-spin-button,
      input[type='number']::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
      }

      .custom-number-input input:focus {
          outline: none !important;
      }

      .custom-number-input button:focus {
          outline: none !important;
      }
  </style>
{% endblock %}